# arc_twitter_intents v1.2
# Twitter Web Intents
# Andy Carter
# http://andy-carter.com/

# ......................................................................
# This is a plugin for Textpattern - http://textpattern.com/
# To install: textpattern > admin > plugins
# Paste the following text into the 'Install plugin' box:
# ......................................................................

YToxMTp7czo0OiJuYW1lIjtzOjE5OiJhcmNfdHdpdHRlcl9pbnRlbnRzIjtzOjc6InZlcnNp
b24iO3M6MzoiMS4yIjtzOjY6ImF1dGhvciI7czoxMToiQW5keSBDYXJ0ZXIiO3M6MTA6ImF1
dGhvcl91cmkiO3M6MjM6Imh0dHA6Ly9hbmR5LWNhcnRlci5jb20vIjtzOjExOiJkZXNjcmlw
dGlvbiI7czoxOToiVHdpdHRlciBXZWIgSW50ZW50cyI7czo1OiJvcmRlciI7czoxOiI1Ijtz
OjQ6InR5cGUiO3M6MToiMCI7czo1OiJmbGFncyI7czoxOiIzIjtzOjQ6ImhlbHAiO3M6NDc3
MToiCTxoMSBjbGFzcz0idGl0bGUiPjxzcGFuIGNsYXNzPSJjYXBzIj5UWFA8L3NwYW4+IFR3
ZWV0IEludGVudHM8L2gxPgoKCTxwPmFyY190d2l0dGVyX2ludGVudHMgcmVxdWlyZXMgYXJj
X3R3aXR0ZXIgdjMuMSBvciBoaWdoZXIgdG8gd29yay48L3A+CgoJPGgyIGNsYXNzPSJzZWN0
aW9uIj5UaGUgYXJjX3R3aXR0ZXJfaW50ZW50X2ZvbGxvdyB0YWc8L2gyPgoKCTxoMz5TeW50
YXg8L2gzPgoKCTxwPiZsdDt0eHA6YXJjX3R3aXR0ZXJfaW50ZW50X2ZvbGxvdyZndDtGb2xs
b3cmbHQ7L3R4cDphcmNfdHdpdHRlcl9pbnRlbnRfZm9sbG93Jmd0OzwvcD4KCgk8aDM+VXNh
Z2U8L2gzPgoKCTx0YWJsZT4KCQk8dHI+CgkJCTx0aD5BdHRyaWJ1dGU8L3RoPgoJCQk8dGg+
RGVzY3JpcHRpb248L3RoPgoJCQk8dGg+RGVmYXVsdDwvdGg+CgkJCTx0aD5FeGFtcGxlPC90
aD4KCQk8L3RyPgoJCTx0cj4KCQkJPHRkPnVzZXI8L3RkPgoJCQk8dGQ+VHdpdHRlciB1c2Vy
IG5hbWUgdG8gZm9sbG93PC90ZD4KCQkJPHRkPiA8ZW0+YXJjX3R3aXR0ZXIgdXNlcm5hbWU8
L2VtPjwvdGQ+CgkJCTx0ZD51c2VyPSZxdW90O2RybW9ua2V5bmluamEmcXVvdDs8L3RkPgoJ
CTwvdHI+CgkJPHRyPgoJCQk8dGQ+dXNlcl9pZDwvdGQ+CgkJCTx0ZD5Ud2l0dGVyIHVzZXIg
aWQgdG8gZm9sbG93IChvdmVycmlkZXMgdGhlIHVzZXIgYXR0cmlidXRlKTwvdGQ+CgkJCTx0
ZD4gPGVtPmFyY190d2l0dGVyIHVzZXJuYW1lPC9lbT48L3RkPgoJCQk8dGQ+dXNlcj0mcXVv
dDtkcm1vbmtleW5pbmphJnF1b3Q7PC90ZD4KCQk8L3RyPgoJPC90YWJsZT4KCgk8aDIgY2xh
c3M9InNlY3Rpb24iPlRoZSBhcmNfdHdpdHRlcl9pbnRlbnRfZmF2b3JpdGUgdGFnPC9oMj4K
Cgk8aDM+U3ludGF4PC9oMz4KCgk8cD4mbHQ7dHhwOmFyY190d2l0dGVyX2ludGVudF9mYXZv
cml0ZSZndDtGYXZvcml0ZSZsdDsvdHhwOmFyY190d2l0dGVyX2ludGVudF9mYXZvcml0ZSZn
dDs8L3A+CgoJPGgzPlVzYWdlPC9oMz4KCgk8dGFibGU+CgkJPHRyPgoJCQk8dGg+QXR0cmli
dXRlPC90aD4KCQkJPHRoPkRlc2NyaXB0aW9uPC90aD4KCQkJPHRoPkRlZmF1bHQ8L3RoPgoJ
CQk8dGg+RXhhbXBsZTwvdGg+CgkJPC90cj4KCQk8dHI+CgkJCTx0ZD5pZDwvdGQ+CgkJCTx0
ZD5Ud2VldCBpZCB0byBmYXZvdXJpdGU8L3RkPgoJCQk8dGQ+IDxlbT5hcnRpY2xlJiM4MjE3
O3MgYXNzb2NpYXRlZCB0d2VldCBmcm9tIGFyY190d2l0dGVyPC9lbT48L3RkPgoJCTwvdHI+
CgkJPHRyPgoJCQk8dGQ+dXNlcjwvdGQ+CgkJCTx0ZD5Ud2l0dGVyIHVzZXIgbmFtZSByZWxh
dGVkIHRvIHR3ZWV0PC90ZD4KCQkJPHRkPiA8ZW0+YXJjX3R3aXR0ZXIgdXNlcm5hbWU8L2Vt
PjwvdGQ+CgkJCTx0ZD51c2VyPSZxdW90O2RybW9ua2V5bmluamEmcXVvdDs8L3RkPgoJCTwv
dHI+CgkJPHRyPgoJCQk8dGQ+cmVsYXRlZDwvdGQ+CgkJCTx0ZD5Db21tYSBzZXBhcmF0ZWQg
bGlzdCBvZiByZWxhdGVkIFR3aXR0ZXIgdXNlcnMgdG8gcmVjb21tZW5kIGZvbGxvd2luZzwv
dGQ+CgkJCTx0ZD4gPGVtPnVuc2V0PC9lbT48L3RkPgoJCQk8dGQ+cmVsYXRlZD0mcXVvdDt0
ZXh0cGF0dGVybiwgdHdpdHRlciZxdW90OzwvdGQ+CgkJPC90cj4KCTwvdGFibGU+CgoJPGgy
IGNsYXNzPSJzZWN0aW9uIj5UaGUgYXJjX3R3aXR0ZXJfaW50ZW50X3JldHdlZXQgdGFnPC9o
Mj4KCgk8aDM+U3ludGF4PC9oMz4KCgk8cD4mbHQ7dHhwOmFyY190d2l0dGVyX2ludGVudF9y
ZXR3ZWV0Jmd0O1JldHdlZXQmbHQ7L3R4cDphcmNfdHdpdHRlcl9pbnRlbnRfcmV0d2VldCZn
dDs8L3A+CgoJPGgzPlVzYWdlPC9oMz4KCgk8dGFibGU+CgkJPHRyPgoJCQk8dGg+QXR0cmli
dXRlPC90aD4KCQkJPHRoPkRlc2NyaXB0aW9uPC90aD4KCQkJPHRoPkRlZmF1bHQ8L3RoPgoJ
CQk8dGg+RXhhbXBsZTwvdGg+CgkJPC90cj4KCQk8dHI+CgkJCTx0ZD5pZDwvdGQ+CgkJCTx0
ZD5Ud2VldCBpZCB0byByZXR3ZWV0PC90ZD4KCQkJPHRkPiA8ZW0+YXJ0aWNsZSYjODIxNztz
IGFzc29jaWF0ZWQgdHdlZXQgZnJvbSBhcmNfdHdpdHRlcjwvZW0+PC90ZD4KCQk8L3RyPgoJ
CTx0cj4KCQkJPHRkPnVzZXI8L3RkPgoJCQk8dGQ+VHdpdHRlciB1c2VyIG5hbWUgcmVsYXRl
ZCB0byB0d2VldDwvdGQ+CgkJCTx0ZD4gPGVtPmFyY190d2l0dGVyIHVzZXJuYW1lPC9lbT48
L3RkPgoJCQk8dGQ+dXNlcj0mcXVvdDtkcm1vbmtleW5pbmphJnF1b3Q7PC90ZD4KCQk8L3Ry
PgoJCTx0cj4KCQkJPHRkPnJlbGF0ZWQ8L3RkPgoJCQk8dGQ+Q29tbWEgc2VwYXJhdGVkIGxp
c3Qgb2YgcmVsYXRlZCBUd2l0dGVyIHVzZXJzIHRvIHJlY29tbWVuZCBmb2xsb3dpbmc8L3Rk
PgoJCQk8dGQ+IDxlbT51bnNldDwvZW0+PC90ZD4KCQkJPHRkPnJlbGF0ZWQ9JnF1b3Q7dGV4
dHBhdHRlcm4sIHR3aXR0ZXImcXVvdDs8L3RkPgoJCTwvdHI+Cgk8L3RhYmxlPgoKCTxoMiBj
bGFzcz0ic2VjdGlvbiI+VGhlIGFyY190d2l0dGVyX2ludGVudF9yZXBseSB0YWc8L2gyPgoK
CTxoMz5TeW50YXg8L2gzPgoKCTxwPiZsdDt0eHA6YXJjX3R3aXR0ZXJfaW50ZW50X3JlcGx5
Jmd0O1JlcGx5Jmx0Oy90eHA6YXJjX3R3aXR0ZXJfaW50ZW50X3JlcGx5Jmd0OzwvcD4KCgk8
aDM+VXNhZ2U8L2gzPgoKCTx0YWJsZT4KCQk8dHI+CgkJCTx0aD5BdHRyaWJ1dGU8L3RoPgoJ
CQk8dGg+RGVzY3JpcHRpb248L3RoPgoJCQk8dGg+RGVmYXVsdDwvdGg+CgkJCTx0aD5FeGFt
cGxlPC90aD4KCQk8L3RyPgoJCTx0cj4KCQkJPHRkPmlkPC90ZD4KCQkJPHRkPlR3ZWV0IGlk
IHRvIHJlcGx5IHRvPC90ZD4KCQkJPHRkPiA8ZW0+YXJ0aWNsZSYjODIxNztzIGFzc29jaWF0
ZWQgdHdlZXQgZnJvbSBhcmNfdHdpdHRlcjwvZW0+PC90ZD4KCQk8L3RyPgoJCTx0cj4KCQkJ
PHRkPnVzZXI8L3RkPgoJCQk8dGQ+VHdpdHRlciB1c2VyIG5hbWUgcmVsYXRlZCB0byB0d2Vl
dCAodXNlZCBmb3IgcmVjb21tZW5kZWQgYWNjb3VudHMpPC90ZD4KCQkJPHRkPiA8ZW0+YXJj
X3R3aXR0ZXIgdXNlcm5hbWU8L2VtPjwvdGQ+CgkJCTx0ZD51c2VyPSZxdW90O2RybW9ua2V5
bmluamEmcXVvdDs8L3RkPgoJCTwvdHI+CgkJPHRyPgoJCQk8dGQ+cmVsYXRlZDwvdGQ+CgkJ
CTx0ZD5Db21tYSBzZXBhcmF0ZWQgbGlzdCBvZiByZWxhdGVkIFR3aXR0ZXIgdXNlcnMgdG8g
cmVjb21tZW5kIGZvbGxvd2luZzwvdGQ+CgkJCTx0ZD4gPGVtPnVuc2V0PC9lbT48L3RkPgoJ
CQk8dGQ+cmVsYXRlZD0mcXVvdDt0ZXh0cGF0dGVybiwgdHdpdHRlciZxdW90OzwvdGQ+CgkJ
PC90cj4KCQk8dHI+CgkJCTx0ZD50ZXh0PC90ZD4KCQkJPHRkPlNldCBzb21lIHRleHQgZm9y
IHRoZSByZXBseSB0d2VldDwvdGQ+CgkJCTx0ZD4gPGVtPnVuc2V0PC9lbT48L3RkPgoJCTwv
dHI+Cgk8L3RhYmxlPgoKCTxoMiBjbGFzcz0ic2VjdGlvbiI+TGFuZ3VhZ2U8L2gyPgoKCTxw
PkFsbCB0aGUgYXJjX3R3aXR0ZXJfaW50ZW50cyB0YWdzIGhhdmUgYW4gb3B0aW9uYWwgJiM4
MjIwO2xhbmcmIzgyMjE7IGF0dHJpYnV0ZSBmb3Igc2V0dGluZyB0aGUgbGFuZ3VhZ2Ugb2Yg
dGhlIFR3aXR0ZXIgaW50ZXJmYWNlLiBUaGUgZm9sbG93aW5nIHZhbHVlcy9sYW5ndWFnZXMg
YXJlIGF2YWlsYWJsZTotPC9wPgoKCTx0YWJsZT4KCQk8dHI+CgkJCTx0aD5BdHRyaWJ1dGUg
dmFsdWU8L3RoPgoJCQk8dGg+TGFuZ3VhZ2U8L3RoPgoJCTwvdHI+CgkJPHRyPgoJCQk8dGQ+
ZW48L3RkPgoJCQk8dGQ+RW5nbGlzaCAoZGVmYXVsdCk8L3RkPgoJCTwvdHI+CgkJPHRyPgoJ
CQk8dGQ+ZnI8L3RkPgoJCQk8dGQ+RnJlbmNoPC90ZD4KCQk8L3RyPgoJCTx0cj4KCQkJPHRk
Pml0PC90ZD4KCQkJPHRkPkl0YWxpYW48L3RkPgoJCTwvdHI+CgkJPHRyPgoJCQk8dGQ+ZXM8
L3RkPgoJCQk8dGQ+U3BhbmlzaDwvdGQ+CgkJPC90cj4KCQk8dHI+CgkJCTx0ZD5rbzwvdGQ+
CgkJCTx0ZD5Lb3JlYW48L3RkPgoJCTwvdHI+CgkJPHRyPgoJCQk8dGQ+anA8L3RkPgoJCQk8
dGQ+SmFwYW5lc2U8L3RkPgoJCTwvdHI+Cgk8L3RhYmxlPgoKCTxoMiBjbGFzcz0ic2VjdGlv
biI+SmF2YVNjcmlwdDwvaDI+CgoJPHA+QWxsIHRoZSBhcmNfdHdpdHRlcl9pbnRlbnRzIHRh
Z3MgaGF2ZSB0d28gb3B0aW9uYWwgYXR0cmlidXRlcyB0aGF0IHJlbGF0ZSB0byB0aGUgaW5j
bHVzaW9uIG9mIHRoZSBUd2l0dGVyIHdpZGdldCBKYXZhU2NyaXB0LjwvcD4KCgk8dGFibGU+
CgkJPHRyPgoJCQk8dGg+QXR0cmlidXRlPC90aD4KCQkJPHRoPkRlc2NyaXB0aW9uPC90aD4K
CQkJPHRoPkRlZmF1bHQ8L3RoPgoJCQk8dGg+RXhhbXBsZTwvdGg+CgkJPC90cj4KCQk8dHI+
CgkJCTx0ZD5pbmNsdWRlX2pzPC90ZD4KCQkJPHRkPkluY2x1ZGUgdGhlIFR3aXR0ZXIgd2lk
Z2V0IEphdmFTY3JpcHQ8L3RkPgoJCQk8dGQ+dHJ1ZTwvdGQ+CgkJCTx0ZD5pbmNsdWRlX2pz
PSZxdW90O2ZhbHNlJnF1b3Q7PC90ZD4KCQk8L3RyPgoJCTx0cj4KCQkJPHRkPm9wdGltaXNl
X2pzPC90ZD4KCQkJPHRkPk9wdGltaXNlIHRoZSBKYXZhU2NyaXB0IGJ5IHVzaW5nIGEgbG9j
YWwgc2NyaXB0IHJhdGhlciB0aGFuIHRoYXQgaG9zdGVkIG9uIHRoZSBUd2l0dGVyIHNpdGU8
L3RkPgoJCQk8dGQ+ZmFsc2U8L3RkPgoJCQk8dGQ+b3B0aW1pc2VfanM9JnF1b3Q7dHJ1ZSZx
dW90OzwvdGQ+CgkJPC90cj4KCTwvdGFibGU+CgoJPHA+PHNwYW4gY2xhc3M9ImNhcHMiPlRY
UDwvc3Bhbj4gVHdlZXQgd2lsbCBvbmx5IGluY2x1ZGUgdGhlIHdpZGdldCBKYXZhU2NyaXB0
IG9uY2Ugb24gYSBwYWdlIHJlZ2FyZGxlc3Mgb2YgdGhlIG51bWJlciBvZiB0YWdzIHVzZWQg
dGhhdCBpbmNsdWRlIGl0LjwvcD4KCiI7czo0OiJjb2RlIjtzOjQ2Mzk6Imdsb2JhbCAkcHJl
ZnMsJHR4cGNmZzsKCi8vIGFyY190d2l0dGVyX2ludGVudHMgcmVxdWlyZXMgYXJjX3R3aXR0
ZXIgdjMuMSBvciBoaWdoZXIKcmVxdWlyZV9wbHVnaW4oJ2FyY190d2l0dGVyJyk7CgppZiAo
QHR4cGludGVyZmFjZSA9PSAnYWRtaW4nKSB7CiAgICByZWdpc3Rlcl9jYWxsYmFjaygnX2Fy
Y190d2l0dGVyX2F1dG9fZW5hYmxlJywgJ3BsdWdpbl9saWZlY3ljbGUuYXJjX3R3aXR0ZXJf
aW50ZW50cycsICdpbnN0YWxsZWQnKTsKfQoKZnVuY3Rpb24gYXJjX3R3aXR0ZXJfaW50ZW50
X2ZvbGxvdygkYXR0cywgJHRoaW5nPW51bGwpCnsKICAgIGdsb2JhbCAkcHJlZnM7CgogICAg
ZXh0cmFjdChsQXR0cyhhcnJheSgKICAgICAgICAndXNlcicgICAgICA9PiAkcHJlZnNbJ2Fy
Y190d2l0dGVyX3VzZXInXSwKICAgICAgICAndXNlcl9pZCcgICA9PiAnJywKICAgICAgICAn
bGFuZycgICAgICA9PiAnJywKICAgICAgICAnaW5jbHVkZV9qcyc9PiB0cnVlLAogICAgICAg
ICdvcHRpbWlzZV9qcycgPT4gZmFsc2UsCiAgICAgICAgJ2NsYXNzJyAgICAgPT4gJycKICAg
ICksJGF0dHMpKTsKCiAgICAkcSA9ICgkdXNlcl9pZCkgPyAndXNlcl9pZD0nLiR1c2VyX2lk
IDogJ3NjcmVlbl9uYW1lPScuJHVzZXI7CgogICAgJGxhbmcgPSBfYXJjX3R3aXR0ZXJfaW50
ZW50c19sYW5nKCRsYW5nKTsKICAgICRxIC49ICcmYW1wO2xhbmc9Jy51cmxlbmNvZGUoJGxh
bmcpOwoKICAgICR0aGluZyA9ICgkdGhpbmc9PT1udWxsKSA/ICdGb2xsb3cnIDogcGFyc2Uo
JHRoaW5nKTsKCiAgICAkaHRtbCA9IGhyZWYoJHRoaW5nLCdodHRwOi8vdHdpdHRlci5jb20v
aW50ZW50L3VzZXI/Jy4kcQogICAgICAsICcgY2xhc3M9IicuJGNsYXNzLiciJyk7CgogICAg
JGpzID0gKCRpbmNsdWRlX2pzKSA/IF9hcmNfdHdpdHRlcl93aWRnZXRfanMoJG9wdGltaXNl
X2pzP3RydWU6ZmFsc2UpIDogJyc7CgogICAgcmV0dXJuICRqcy4kaHRtbDsKfQoKZnVuY3Rp
b24gYXJjX3R3aXR0ZXJfaW50ZW50X2Zhdm9yaXRlKCRhdHRzLCAkdGhpbmc9bnVsbCkKewog
ICAgZ2xvYmFsICRwcmVmcywgJHRoaXNhcnRpY2xlOwoKICAgIGV4dHJhY3QobEF0dHMoYXJy
YXkoCiAgICAgICAgJ3VzZXInICAgICAgPT4gJHByZWZzWydhcmNfdHdpdHRlcl91c2VyJ10s
CiAgICAgICAgJ3JlbGF0ZWQnICAgPT4gJycsCiAgICAgICAgJ2luY2x1ZGVfanMnPT4gdHJ1
ZSwKICAgICAgICAnb3B0aW1pc2VfanMnID0+IGZhbHNlLAogICAgICAgICdsYW5nJyAgICAg
ID0+ICcnLAogICAgICAgICdpZCcgICAgICAgID0+ICcnLAogICAgICAgICdjbGFzcycgICAg
ID0+ICcnCiAgICApLCRhdHRzKSk7CgogICAgaWYgKCRpZCB8fCAkdGhpc2FydGljbGVbJ3Ro
aXNpZCddKSB7CgogICAgICAkcSA9ICdyZWxhdGVkPScuJHVzZXI7CiAgICAgIGlmICgkcmVs
YXRlZCkgJHEgLj0gdXJsZW5jb2RlKCgkcT8nLCc6J3JlbGF0ZWQ9JykuJHJlbGF0ZWQpOwoK
ICAgICAgaWYgKCEkaWQpIHsKICAgICAgICAkcm93ID0gc2FmZV9yb3coInR3ZWV0X2lkIgog
ICAgICAgICwgJ2FyY190d2l0dGVyJywgImFydGljbGVfaWQ9eyR0aGlzYXJ0aWNsZVsndGhp
c2lkJ119Iik7CiAgICAgICAgaWYgKCEkaWQgPSAkcm93Wyd0d2VldF9pZCddKSByZXR1cm4g
ZmFsc2U7CiAgICAgIH0KCiAgICAgICRxIC49ICcmYW1wO3R3ZWV0X2lkPScuJGlkOwoKICAg
ICAgJGxhbmcgPSBfYXJjX3R3aXR0ZXJfaW50ZW50c19sYW5nKCRsYW5nKTsKICAgICAgJHEg
Lj0gJyZhbXA7bGFuZz0nLnVybGVuY29kZSgkbGFuZyk7CgogICAgICAkdGhpbmcgPSAoJHRo
aW5nPT09bnVsbCkgPyAnRmF2b3JpdGUnIDogcGFyc2UoJHRoaW5nKTsKCiAgICAgICRodG1s
ID0gaHJlZigkdGhpbmcsJ2h0dHA6Ly90d2l0dGVyLmNvbS9pbnRlbnQvZmF2b3JpdGU/Jy4k
cQogICAgICAgICwgJyBjbGFzcz0iJy4kY2xhc3MuJyInKTsKCiAgICAgICRqcyA9ICgkaW5j
bHVkZV9qcykgPyBfYXJjX3R3aXR0ZXJfd2lkZ2V0X2pzKCRvcHRpbWlzZV9qcz90cnVlOmZh
bHNlKSA6ICcnOwoKICAgICAgcmV0dXJuICRqcy4kaHRtbDsKCiAgICB9CgogICAgcmV0dXJu
IGZhbHNlOwp9CgpmdW5jdGlvbiBhcmNfdHdpdHRlcl9pbnRlbnRfcmV0d2VldCgkYXR0cywg
JHRoaW5nPW51bGwpCnsKICAgIGdsb2JhbCAkcHJlZnMsICR0aGlzYXJ0aWNsZTsKCiAgICBl
eHRyYWN0KGxBdHRzKGFycmF5KAogICAgICAgICd1c2VyJyAgICAgID0+ICRwcmVmc1snYXJj
X3R3aXR0ZXJfdXNlciddLAogICAgICAgICdyZWxhdGVkJyAgID0+ICcnLAogICAgICAgICdp
bmNsdWRlX2pzJz0+IHRydWUsCiAgICAgICAgJ29wdGltaXNlX2pzJyA9PiBmYWxzZSwKICAg
ICAgICAnbGFuZycgICAgICA9PiAnJywKICAgICAgICAnaWQnICAgICAgICA9PiAnJywKICAg
ICAgICAnY2xhc3MnICAgICA9PiAnJwogICAgKSwkYXR0cykpOwoKICAgIGlmICgkaWQgfHwg
JHRoaXNhcnRpY2xlWyd0aGlzaWQnXSkgewoKICAgICAgJHEgPSAncmVsYXRlZD0nLiR1c2Vy
OwogICAgICBpZiAoJHJlbGF0ZWQpICRxIC49IHVybGVuY29kZSgoJHE/JywnOidyZWxhdGVk
PScpLiRyZWxhdGVkKTsKCiAgICAgIGlmICghJGlkKSB7CiAgICAgICAgJHJvdyA9IHNhZmVf
cm93KCJ0d2VldF9pZCIKICAgICAgICAsICdhcmNfdHdpdHRlcicsICJhcnRpY2xlX2lkPXsk
dGhpc2FydGljbGVbJ3RoaXNpZCddfSIpOwogICAgICAgIGlmICghJGlkID0gJHJvd1sndHdl
ZXRfaWQnXSkgcmV0dXJuIGZhbHNlOwogICAgICB9CgogICAgICAkcSAuPSAnJmFtcDt0d2Vl
dF9pZD0nLiRpZDsKCiAgICAgICRsYW5nID0gX2FyY190d2l0dGVyX2ludGVudHNfbGFuZygk
bGFuZyk7CiAgICAgICRxIC49ICcmYW1wO2xhbmc9Jy51cmxlbmNvZGUoJGxhbmcpOwoKICAg
ICAgJHRoaW5nID0gKCR0aGluZz09PW51bGwpID8gJ1JldHdlZXQnIDogcGFyc2UoJHRoaW5n
KTsKCiAgICAgICRodG1sID0gaHJlZigkdGhpbmcsJ2h0dHA6Ly90d2l0dGVyLmNvbS9pbnRl
bnQvcmV0d2VldD8nLiRxCiAgICAgICAgLCAnIGNsYXNzPSInLiRjbGFzcy4nIicpOwoKICAg
ICAgJGpzID0gKCRpbmNsdWRlX2pzKSA/IF9hcmNfdHdpdHRlcl93aWRnZXRfanMoJG9wdGlt
aXNlX2pzP3RydWU6ZmFsc2UpIDogJyc7CgogICAgICByZXR1cm4gJGpzLiRodG1sOwoKICAg
IH0KCiAgICByZXR1cm4gZmFsc2U7Cn0KCmZ1bmN0aW9uIGFyY190d2l0dGVyX2ludGVudF9y
ZXBseSgkYXR0cywgJHRoaW5nPW51bGwpCnsKICAgIGdsb2JhbCAkcHJlZnMsICR0aGlzYXJ0
aWNsZTsKCiAgICBleHRyYWN0KGxBdHRzKGFycmF5KAogICAgICAgICd1c2VyJyAgICAgID0+
ICRwcmVmc1snYXJjX3R3aXR0ZXJfdXNlciddLAogICAgICAgICdyZWxhdGVkJyAgID0+ICcn
LAogICAgICAgICd0ZXh0JyAgICAgID0+ICcnLAogICAgICAgICdpbmNsdWRlX2pzJz0+IHRy
dWUsCiAgICAgICAgJ29wdGltaXNlX2pzJyA9PiBmYWxzZSwKICAgICAgICAnbGFuZycgICAg
ICA9PiAnJywKICAgICAgICAnaWQnICAgICAgICA9PiAnJywKICAgICAgICAnY2xhc3MnICAg
ICA9PiAnJwogICAgKSwkYXR0cykpOwoKICAgIGlmICgkaWQgfHwgJHRoaXNhcnRpY2xlWyd0
aGlzaWQnXSkgewoKICAgICAgaWYgKCEkaWQpIHsKICAgICAgICAkcm93ID0gc2FmZV9yb3co
InR3ZWV0X2lkIgogICAgICAgICwgJ2FyY190d2l0dGVyJywgImFydGljbGVfaWQ9eyR0aGlz
YXJ0aWNsZVsndGhpc2lkJ119Iik7CiAgICAgICAgaWYgKCEkaWQgPSAkcm93Wyd0d2VldF9p
ZCddKSByZXR1cm4gZmFsc2U7CiAgICAgIH0KCiAgICAgICRxID0gJ2luX3JlcGx5X3RvPScu
JGlkOwoKICAgICAgaWYgKCR1c2VyKSB7CiAgICAgICAgJHEgLj0gJyZhbXA7cmVsYXRlZD0n
LnVybGVuY29kZSgkdXNlcik7CiAgICAgIH0KICAgICAgaWYgKCRyZWxhdGVkKSB7CiAgICAg
ICAgJHEgLj0gdXJsZW5jb2RlKCgkdXNlcj8nLCc6JyZyZWxhdGVkPScpLiRyZWxhdGVkKTsK
ICAgICAgfQogICAgICBpZiAoJHRleHQpIHsKICAgICAgICAkcSAuPSAnJmFtcDt0ZXh0PScu
dXJsZW5jb2RlKCR0ZXh0KTsKICAgICAgfQoKICAgICAgJGxhbmcgPSBfYXJjX3R3aXR0ZXJf
aW50ZW50c19sYW5nKCRsYW5nKTsKICAgICAgJHEgLj0gJyZhbXA7bGFuZz0nLnVybGVuY29k
ZSgkbGFuZyk7CgogICAgICAkdGhpbmcgPSAoJHRoaW5nPT09bnVsbCkgPyAnUmVwbHknIDog
cGFyc2UoJHRoaW5nKTsKCiAgICAgICRodG1sID0gaHJlZigkdGhpbmcsJ2h0dHA6Ly90d2l0
dGVyLmNvbS9pbnRlbnQvdHdlZXQ/Jy4kcQogICAgICAgICwgJyBjbGFzcz0iJy4kY2xhc3Mu
JyInKTsKCiAgICAgICRqcyA9ICgkaW5jbHVkZV9qcykgPyBfYXJjX3R3aXR0ZXJfd2lkZ2V0
X2pzKCRvcHRpbWlzZV9qcz90cnVlOmZhbHNlKSA6ICcnOwoKICAgICAgcmV0dXJuICRqcy4k
aHRtbDsKCiAgICB9CgogICAgcmV0dXJuIGZhbHNlOwp9CgovKgogKiBTZXQgdGhlIGludGVu
dCBsYW5ndWFnZQogKi8KZnVuY3Rpb24gX2FyY190d2l0dGVyX2ludGVudHNfbGFuZygkbGFu
Zz0nZW4nKQp7CiAgJGxhbmcgPSBzdHJ0b2xvd2VyKCRsYW5nKTsKICAkbGFuZ3MgPSBhcnJh
eSgnZW4nLCAnaXQnLCAnZXMnLCAnZnInLCAna28nLCAnanAnKTsKICByZXR1cm4gKGluX2Fy
cmF5KCRsYW5nLCRsYW5ncykpID8gJGxhbmcgOiAnZW4nOwp9CgoiO3M6MzoibWQ1IjtzOjMy
OiJiZTI3N2RjNjEwZWVlMzE1MjI5YmQwZDIxYTE3MzEyZCI7fQ==
